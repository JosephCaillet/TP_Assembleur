STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 1  "c6e4.ASM"
                                               e:\TP\c8e2\c8e2.asm

   1                             ST7/      
   2                             
   3                             ;*************************************************************
                                 ;***********
   4                             ; TITLE:                
   5                             ; AUTHOR:               
   6                             ; DESCRIPTION:          
   7                             ;*************************************************************
                                 ;***********
   8                             
   9  0000                                 TITLE    "c6e4.ASM"
  10                                       
  11  0000                                 MOTOROLA 
  12                                       
   0  0000                                 #include "ST7Lite2.INC"
   1                             ;*************************************************************
                                 ;*********** 
   2                             ; TITLE:                ST7FLite2.INC
   3                             ; AUTHOR:               CMG Microcontroller Application Team
   4                             ; DESCRIPTION:          ST7FLite2 Register and memory mapping 
                                 ;
   5                             ;*************************************************************
                                 ;***********;*************************************************
                                 ;********************
   6                             
   7                             ;*************************************************************
                                 ;*********
   8                             ;		I/O Ports Registers
   9                             ;*************************************************************
                                 ;*********
  10                             
  11  0000                                 EXTERN   PADR.b        ; port A data register
  12  0000                                 EXTERN   PADDR.b       ; port A data direction 
                                                                  ;register
  13  0000                                 EXTERN   PAOR.b        ; port A option register
  14                             
  15  0000                                 EXTERN   PBDR.b        ; port B data register
  16  0000                                 EXTERN   PBDDR.b       ; port B data direction 
                                                                  ;register
  17  0000                                 EXTERN   PBOR.b        ; port B option register
  18                             
  19                             ;*************************************************************
                                 ;*********
  20                             ;		Lite Timer Registers
  21                             ;*************************************************************
                                 ;*********
  22                                       
  23  0000                                 EXTERN   LTCSR2.b      ; Lite Timer Control/Status 
                                                                  ;register 2
  24  0000                                 EXTERN   LTCARR.b      ; Lite Timer Auto-reload 
                                                                  ;register
  25  0000                                 EXTERN   LTCNTR.b      ; Lite Timer Counter register
  26  0000                                 EXTERN   LTCSR1.b      ; Lite Timer Control/Status 
                                                                  ;register 1
  27  0000                                 EXTERN   LTICR.b       ; Lite Timer Input Capture 
                                                                  ;register
  28                                       
STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 2  "c6e4.ASM"
                                               e:\TP\c8e2\ST7Lite2.INC

  29                             ;*************************************************************
                                 ;*********
  30                             ;		Auto reload timer registers
  31                             ;*************************************************************
                                 ;*********
  32                             
  33  0000                                 EXTERN   ATCSR.b       ; Timer Control/Status register 
                                                                  ;1
  34  0000                                 EXTERN   CNTRH.b       ; Counter Register High
  35  0000                                 EXTERN   CNTRL.b       ; Counter Register Low 
  36  0000                                 EXTERN   ATRH.b        ; Auto-Reload Register High
  37  0000                                 EXTERN   ATRL.b        ; Auto-Reload Register Low
  38  0000                                 EXTERN   PWMCR.b       ; PWM Output Control Register
  39  0000                                 EXTERN   PWM0CSR.b     ; PWM 0 Control/Status Register 
                                                                  ; 
  40  0000                                 EXTERN   PWM1CSR.b     ; PWM 1 Control/Status Register 
                                                                  ; 
  41  0000                                 EXTERN   PWM2CSR.b     ; PWM 2 Control/Status Register 
                                                                  ; 
  42  0000                                 EXTERN   PWM3CSR.b     ; PWM 3 Control/Status Register 
                                                                  ; 
  43  0000                                 EXTERN   DCR0H.b       ; PWM 0 Duty Cycle Register 
                                                                  ;High
  44  0000                                 EXTERN   DCR0L.b       ; PWM 0 Duty Cycle Register Low 
                                                                  ;  
  45  0000                                 EXTERN   DCR1H.b       ; PWM 0 Duty Cycle Register 
                                                                  ;High
  46  0000                                 EXTERN   DCR1L.b       ; PWM 0 Duty Cycle Register Low 
                                                                  ;  
  47  0000                                 EXTERN   DCR2H.b       ; PWM 0 Duty Cycle Register 
                                                                  ;High
  48  0000                                 EXTERN   DCR2L.b       ; PWM 0 Duty Cycle Register Low 
                                                                  ;  
  49  0000                                 EXTERN   DCR3H.b       ; PWM 0 Duty Cycle Register 
                                                                  ;High
  50  0000                                 EXTERN   DCR3L.b       ; PWM 0 Duty Cycle Register Low 
                                                                  ;  
  51  0000                                 EXTERN   ATICRH.b      ; Input Capture Register High 
  52  0000                                 EXTERN   ATICRL.b      ; Input Capture Register Low
  53  0000                                 EXTERN   TRANCR.b      ; Transfer Control Register
  54  0000                                 EXTERN   BREAKCR.b     ; Break Control Register  
  55                             
  56                             ;*************************************************************
                                 ;*********
  57                             ;                        Watchdog Control  register
  58                             ;*************************************************************
                                 ;*********
  59                                       
  60  0000                                 EXTERN   WDGCR.b       ; Watchdog Control Register 
  61                             
  62                             
  63                             ;*************************************************************
                                 ;*********
  64                             ;		Flash Register
  65                             ;*************************************************************
                                 ;*********
  66                             
STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 3  "c6e4.ASM"
                                               e:\TP\c8e2\ST7Lite2.INC

  67  0000                                 EXTERN   FCSR.b        ; flash control/satus register
  68                             
  69                             ;*************************************************************
                                 ;*********
  70                             ;		EEPROM Register
  71                             ;*************************************************************
                                 ;*********
  72                             
  73  0000                                 EXTERN   EECSR.b       ; data EEPROM control status 
                                                                  ;register
  74                             
  75                             ;*************************************************************
                                 ;*********
  76                             ;		SPI Registers
  77                             ;*************************************************************
                                 ;*********
  78                             
  79  0000                                 EXTERN   SPIDR.b       ; SPI data I/O register
  80  0000                                 EXTERN   SPICR.b       ; SPI control register
  81  0000                                 EXTERN   SPISR.b       ; SPI status register
  82                             
  83                             ;*************************************************************
                                 ;*********
  84                             ;		ADC Registers
  85                             ;*************************************************************
                                 ;*********
  86                                       
  87  0000                                 EXTERN   ADCCSR.b      ; ADC Control Status register
  88  0000                                 EXTERN   ADCDRH.b      ; ADC Data register
  89  0000                                 EXTERN   ADCDRL.b      ; ADC Amplifier Control 
                                                                  ;register
  90                                       
  91                             ;*************************************************************
                                 ;*********
  92                             ;		ITC Registers
  93                             ;*************************************************************
                                 ;*********
  94                                       
  95  0000                                 EXTERN   EICR.b        ; external interrupt control 
                                                                  ;register
  96                             
  97                             ;*************************************************************
                                 ;*********
  98                             ;		MCC egisters
  99                             ;*************************************************************
                                 ;*********
 100                             
 101  0000                                 EXTERN   MCCSR.b       ; main clock control/status 
                                                                  ;register
 102                                       
 103                             ;*************************************************************
                                 ;*********
 104                             ;		Clock & Reset Registers
 105                             ;*************************************************************
                                 ;*********
 106                             
 107  0000                                 EXTERN   RCCR.b        ; RC oscilator control register
STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 4  "c6e4.ASM"
                                               e:\TP\c8e2\ST7Lite2.INC

 108  0000                                 EXTERN   SICSR.b       ; system integrity 
                                                                  ;control/status register
 109                             
 110                             ;*************************************************************
                                 ;*********
 111                             ;                        External Interrupt Selection 
                                 ;Registers
 112                             ;*************************************************************
                                 ;*********
 113                             
 114  0000                                 EXTERN   EISR.b        ;  External Interrupt Selection 
                                                                  ;Register
 115                             
 116                             ;*************************************************************
                                 ;*********
 117                             ;                        Dali Registers
 118                             ;*************************************************************
                                 ;*********
 119                             
 120  0000                                 EXTERN   DCMCLK.b      ; DALI Clock Register
 121  0000                                 EXTERN   DCMFA.b       ; DALI Forward Address Register
 122  0000                                 EXTERN   DCMFD.b       ; DALI Forward Data Register
 123  0000                                 EXTERN   DCMBD.b       ; DALI Backward Data Register
 124  0000                                 EXTERN   DCMCR.b       ; DALI Control Register
 125  0000                                 EXTERN   DCMCSR.b      ; DALI Control/Status Register
 126                             
 127                             ;*************************************************************
                                 ;*********
 128                             ;                        AWU Registers
 129                             ;*************************************************************
                                 ;*********
 130                             
 131  0000                                 EXTERN   AWUPR.b       ; AWU Prescaler Register
 132  0000                                 EXTERN   AWUCSR.b      ; AWU Control/Status Register
 133                             
 134                             ;*************************************************************
                                 ;*********
 135                             ;                        DM Registers
 136                             ;*************************************************************
                                 ;*********
 137                             
 138  0000                                 EXTERN   DMCR.b        ; DM Control Register
 139  0000                                 EXTERN   DMSR.b        ; DM Status Register
 140  0000                                 EXTERN   DMBK1H.b      ; DM Breakpoint Register 1 High
 141  0000                                 EXTERN   DMBK1L.b      ; DM Breakpoint Register 1 Low
 142  0000                                 EXTERN   DMBK2H.b      ; DM Breakpoint Register 2 High
 143  0000                                 EXTERN   DMBK2L.b      ; DM Breakpoint Register 2 Low
 144                             
<END_OF_INCLUSION>
  14                                                              ;#include "MAX7219.ASM"
   0  0000                                 #include "MAX7219.INC"
   1                             
   2                             ;*************************************************************
                                 ;***********
   3                             ; TITLE:                MAX7219.ASM
   4                             ; AUTHOR:               Nicolas Coquelle
   5                             ; DESCRIPTION:          Bibliothèque pour l'utilisation d'un 
                                 ;MAX7219
STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 5  "c6e4.ASM"
                                               e:\TP\c8e2\MAX7219.INC

   6                             ;                       pour l'affichage sur des afficheurs 7 
                                 ;segments
   7                             ;*************************************************************
                                 ;***********
   8                             
   9  0000                                 EXTERN   MAX7219_Init
  10  0000                                 EXTERN   MAX7219_ShutdownStart
  11  0000                                 EXTERN   MAX7219_ShutdownStop
  12  0000                                 EXTERN   MAX7219_DisplayTestStart
  13  0000                                 EXTERN   MAX7219_DisplayTestStop
  14  0000                                 EXTERN   MAX7219_SetBrightness, SetBrightness_Bright.B
  15  0000                                 EXTERN   MAX7219_Clear
  16  0000                                 EXTERN   MAX7219_AllumePoint
  17  0000                                 EXTERN   MAX7219_AfficheP
  18  0000                                 EXTERN   MAX7219_DisplayChar, DisplayChar_Digit.B, DisplayChar_Character.B
  19                             
  20                             ;*** (c) 2002  Nicolas Coquelle - ISEM 
                                 ;**************************************
<END_OF_INCLUSION>
  16                             
  17                                                              ; Enlever le commentaire si vous
                                                                  ; utilisez les afficheurs
  18                             ;	#include "MAX7219.INC"
  19                             
  20                             
  21                             ;*************************************************************
                                 ;***********
  22                             ;
  23                             ;  ZONE DE DECLARATION DES SYMBOLES
  24                             ;
  25                             ;*************************************************************
                                 ;***********
  26                             
  27  FFDE                       RCCR0     EQU      $FFDE
  28                             
  29                             ;*************************************************************
                                 ;***********
  30                             ;
  31                             ;  FIN DE LA ZONE DE DECLARATION DES SYMBOLES
  32                             ;
  33                             ;*************************************************************
                                 ;***********
  34                             
  35                                       
  36  0000                                 BYTES    
  37                                       
  38                                       segment  byte 'ram0'
  39                             
  40                             ;*************************************************************
                                 ;***********
  41                             ;
  42                             ;  ZONE DE DECLARATION DES VARIABLES
  43                             ;
  44                             ;*************************************************************
                                 ;***********
  45                             
  46  0088                       valeurUnite  DS.B     1
  47  0089                       valeurDizaine  DS.B     1
STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 6  "c6e4.ASM"
                                               e:\TP\c8e2\c8e2.asm

  48  008A                       retenue   DS.B     1
  49  008B                       running   DS.B     1
  50                             
  51                             
  52                             ;*************************************************************
                                 ;***********
  53                             ;
  54                             ;  FIN DE LA ZONE DE DECLARATION DES VARIABLES
  55                             ;
  56                             ;*************************************************************
                                 ;***********
  57                             
  58                             
  59  008C                                 WORDS    
  60                             
  61                                       segment  byte 'rom'
  62                             
  63                             ;*************************************************************
                                 ;***********
  64                             ;
  65                             ;  ZONE DE DECLARATION DES CONSTANTES
  66                             ;
  67                             ;*************************************************************
                                 ;***********
  68                             
  69                             
  70                             
  71                             
  72                             ;*************************************************************
                                 ;***********
  73                             ;
  74                             ;  FIN DE LA ZONE DE DECLARATION DES CONSTANTES
  75                             ;
  76                             ;*************************************************************
                                 ;***********
  77                             
  78                             ;-------------------------------------------------------------
                                 ;-----------
  79                             
  80                             ;*************************************************************
                                 ;***********
  81                             ;
  82                             ;  ZONE DE DECLARATION DES SOUS-PROGRAMMES
  83                             ;
  84                             ;*************************************************************
                                 ;***********
  85                             
  86                             init_port_spi:  
  87  E0FD   A60C                          ld       a,#$0C
  88  E0FF   B732                          ld       SPICR,a
  89  E101   A603                          ld       a,#$03
  90  E103   B733                          ld       SPISR,a
  91  E105   A65C                          ld       a,#$5C
  92  E107   B732                          ld       SPICR,a
  93                                       
  94  E109   B604                          LD       A,PBDDR       ;init PBDDR dire quoi est en 
                                                                  ;push/pull etc
STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 7  "c6e4.ASM"
                                               e:\TP\c8e2\c8e2.asm

  95  E10B   AA04                          OR       A,#%00000100
  96  E10D   B704                          LD       PBDDR,A
  97                                       
  98  E10F   B605                          LD       A,PBOR        ;init PBOR
  99  E111   AA04                          OR       A,#%00000100
 100  E113   B705                          LD       PBOR,A
 101  E115   81                            RET      
 102                             
 103                             ;----------------------------------------------------------;
 104                             
 105                             init_io_ports:  
 106  E116   B601                          LD       A,PADDR       ;init PADDR dire quoi est en 
                                                                  ;push/pull etc
 107  E118   A4F7                          AND      A,#%11110111
 108                                                              ;OR	A,#%00000000
 109  E11A   B701                          LD       PADDR,A
 110                                       
 111  E11C   B602                          LD       A,PAOR        ;init PAOR
 112                                                              ;AND	A,#%11111111
 113  E11E   AA08                          OR       A,#%00001000
 114  E120   B702                          LD       PAOR,A
 115                                       
 116  E122   B604                          LD       A,PBDDR       ;init PADDR dire quoi est en 
                                                                  ;push/pull etc
 117  E124   A4FE                          AND      A,#%11111110
 118                                                              ;OR	A,#%00000000
 119  E126   B704                          LD       PBDDR,A
 120                                       
 121  E128   B605                          LD       A,PBOR        ;init PAOR
 122                                                              ;AND	A,#%11111111
 123  E12A   AA01                          OR       A,#%00000001
 124  E12C   B705                          LD       PBOR,A
 125                                       
 126  E12E   81                            RET      
 127                             
 128                             ;----------------------------------------------------------;
 129                                       
 130                             init_int_mask:  
 131  E12F   B637                          ld       a,EICR
 132  E131   A4BE                          and      a,#%10111110
 133  E133   AA82                          or       a,#%10000010
 134  E135   B737                          ld       EICR, a
 135                                       
 136  E137   B63C                          ld       a,EISR
 137  E139   A43F                          and      a,#%00111111
 138  E13B   AA03                          or       a,#%00000011
 139  E13D   B73C                          ld       EISR,a
 140                                       
 141  E13F   9A                            rim      
 142                                       
 143  E140   81                            ret      
 144                             
 145                             ;----------------------------------------------------------;
 146                             
 147                             init_chrono:  
 148  E141   3F88                          clr      valeurUnite
 149  E143   3F89                          clr      valeurDizaine
STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 8  "c6e4.ASM"
                                               e:\TP\c8e2\c8e2.asm

 150  E145   3F8A                          clr      retenue
 151  E147   81                            ret      
 152                             
 153                             ;----------------------------------------------------------;
 154                             
 155                             init_aff:  
 156  E148   CDE010                        call     MAX7219_Init
 157  E14B   CDE081                        call     MAX7219_Clear
 158  E14E   81                            ret      
 159                             
 160                             ;----------------------------------------------------------;
 161                             
 162                             inc_aff:  
 163  E14F   B688                          ld       a,valeurUnite
 164                                                              ;--- if(a == 9) ---
 165  E151   A109                          cp       a,#9
 166  E153   260A                          jrne     inc_u
 167                                                              ;--- then{ ---
 168  E155   3F88                          clr      valeurUnite
 169  E157   BE8A                          ld       x,retenue
 170  E159   5C                            inc      x
 171  E15A   BF8A                          ld       retenue, x
 172  E15C   CCE162                        jp       n_inc_u
 173                                                              ;--- }end_then ---
 174                                                              ;--- else{ ---
 175                             inc_u     
 176  E15F   4C                            inc      a
 177  E160   B788                          ld       valeurUnite, a
 178                                                              ;--- }end_else ---
 179                                       
 180                             n_inc_u   
 181  E162   BE8A                          ld       x,retenue
 182                                                              ;--- if(x != 0) ---
 183  E164   A300                          cp       x,#0
 184  E166   2713                          jreq     n_inc_d
 185                                                              ;--- then{ ---
 186  E168   B689                          ld       a,valeurDizaine
 187                                                              ;--- if(a == 9) ---
 188  E16A   A109                          cp       a,#9
 189  E16C   2607                          jrne     inc_d
 190                                                              ;--- then{ ---
 191  E16E   3F89                          clr      valeurDizaine
 192  E170   3F8A                          clr      retenue
 193  E172   CCE17B                        jp       n_inc_d
 194                                                              ;--- }end_then ---
 195                                                              ;--- else{ ---
 196                             inc_d     
 197  E175   BB8A                          add      a,retenue
 198  E177   B789                          ld       valeurDizaine, a
 199                                                              ;--- }end_else ---
 200  E179   3F8A                          clr      retenue
 201                                                              ;-- }end_then ---
 202                             n_inc_d   
 203                                       
 204  E17B   81                            ret      
 205                             
 206                             ;----------------------------------------------------------;
STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 9  "c6e4.ASM"
                                               e:\TP\c8e2\c8e2.asm

 207                             
 208                             aff_u:    
 209  E17C   A604                          ld       a,#4
 210  E17E   B781                          ld       DisplayChar_Digit,a
 211  E180   B688                          ld       a, valeurUnite
 212  E182   B782                          ld       DisplayChar_Character,a
 213  E184   CDE092                        call     MAX7219_DisplayChar
 214  E187   81                            ret      
 215                             
 216                             ;----------------------------------------------------------;
 217                             
 218                             aff_d:    
 219  E188   A603                          ld       a,#3
 220  E18A   B781                          ld       DisplayChar_Digit,a
 221  E18C   B689                          ld       a, valeurDizaine
 222  E18E   B782                          ld       DisplayChar_Character,a
 223  E190   CDE092                        call     MAX7219_DisplayChar
 224  E193   81                            ret      
 225                             
 226                             ;----------------------------------------------------------;
 227                             
 228                             tempo:    
 229                             initBoucle1:  
 230  E194   5F                            CLR      X
 231                             boucle1:  
 232  E195   5C                            INC      X
 233  E196   CDE19E                        CALL     initBoucle2
 234  E199   A3B5                          CP       X,#181
 235  E19B   26F8                          JRNE     boucle1
 236  E19D   81                            RET      
 237                             initBoucle2:  
 238  E19E   905F                          CLR      Y
 239                             boucle2:  
 240  E1A0   905C                          INC      Y
 241  E1A2   90A3B5                        CP       Y,#181
 242  E1A5   26F9                          JRNE     boucle2
 243  E1A7   81                            RET      
 244                             
 245                             ;---------------------------------------------------------;
 246                             
 247                             init_oscRC:  
 248  E1A8   C6FFDE                        ld       A,RCCR0
 249  E1AB   B739                          ld       RCCR,A
 250  E1AD   81                            RET      
 251                             
 252                             ;*************************************************************
                                 ;***********
 253                             ;
 254                             ;  FIN DE LA ZONE DE DECLARATION DES SOUS-PROGRAMMES
 255                             ;
 256                             ;*************************************************************
                                 ;***********
 257                             
 258                             
 259                             ;*************************************************************
                                 ;***********
 260                             ;
STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 10  "c6e4.ASM"
                                               e:\TP\c8e2\c8e2.asm

 261                             ;  PROGRAMME PRINCIPAL
 262                             ;
 263                             ;*************************************************************
                                 ;***********
 264                             
 265                             main:     
 266  E1AE   9C                            RSP                    ; Reset Stack Pointer
 267  E1AF   CDE1A8                        call     init_oscRC
 268  E1B2   CDE116                        call     init_io_ports
 269  E1B5   CDE12F                        call     init_int_mask
 270  E1B8   CDE0FD                        call     init_port_spi
 271  E1BB   CDE148                        call     init_aff
 272  E1BE   CDE141                        call     init_chrono
 273                                       
 274                             boucl     
 275  E1C1   CDE17C                        call     aff_u
 276  E1C4   CDE188                        call     aff_d
 277                                       
 278  E1C7   B68B                          ld       A,running
 279  E1C9   A100                          cp       A,#0
 280  E1CB   2703                          JREQ     skip_aff      
 281                                       
 282  E1CD   CDE14F                        call     inc_aff
 283                             
 284                             skip_aff:  
 285  E1D0   CDE194                        call     tempo
 286                             
 287  E1D3   CCE1C1                        JP       boucl
 288                             
 289                             ;*************************************************************
                                 ;***********
 290                             ;
 291                             ;  ZONE DE DECLARATION DES SOUS-PROGRAMMES D'INTERRUPTION
 292                             ;
 293                             ;*************************************************************
                                 ;***********
 294                             
 295                             
 296  E1D6   80                  dummy_rt:  IRET                   ; Procédure vide : retour au 
                                                                  ;programme principal.
 297                             
 298                             int_marche:  
 299  E1D7   A601                          ld       a,#1
 300  E1D9   B78B                          ld       running,a
 301  E1DB   80                            iret     
 302                             
 303                             int_arret:  
 304  E1DC   3F8B                          clr      running
 305  E1DE   80                            iret     
 306                             
 307                             ;*************************************************************
                                 ;***********
 308                             ;
 309                             ;  ZONE DE DECLARATION DES VECTEURS D'INTERRUPTION
 310                             ;
 311                             ;*************************************************************
                                 ;***********
STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 11  "c6e4.ASM"
                                               e:\TP\c8e2\c8e2.asm

 312                             
 313                             
 314                                       segment  'vectit'
 315                             
 316                             
 317  FFE0   E1D6                          DC.W     dummy_rt      ; Adresse FFE0-FFE1h
 318  FFE2   E1D6                SPI_it    DC.W     dummy_rt      ; Adresse FFE2-FFE3h
 319  FFE4   E1D6                lt_RTC1_it  DC.W     dummy_rt      ; Adresse FFE4-FFE5h
 320  FFE6   E1D6                lt_IC_it  DC.W     dummy_rt      ; Adresse FFE6-FFE7h
 321  FFE8   E1D6                at_timerover_it  DC.W     dummy_rt      ; Adresse FFE8-FFE9h
 322  FFEA   E1D6                at_timerOC_it  DC.W     dummy_rt      ; Adresse FFEA-FFEBh
 323  FFEC   E1D6                AVD_it    DC.W     dummy_rt      ; Adresse FFEC-FFEDh
 324  FFEE   E1D6                          DC.W     dummy_rt      ; Adresse FFEE-FFEFh
 325  FFF0   E1D6                lt_RTC2_it  DC.W     dummy_rt      ; Adresse FFF0-FFF1h
 326  FFF2   E1DC                ext3_it   DC.W     int_arret     ; Adresse FFF2-FFF3h
 327  FFF4   E1D6                ext2_it   DC.W     dummy_rt      ; Adresse FFF4-FFF5h
 328  FFF6   E1D6                ext1_it   DC.W     dummy_rt      ; Adresse FFF6-FFF7h
 329  FFF8   E1D7                ext0_it   DC.W     int_marche    ; Adresse FFF8-FFF9h
 330  FFFA   E1D6                AWU_it    DC.W     dummy_rt      ; Adresse FFFA-FFFBh
 331  FFFC   E1D6                softit    DC.W     dummy_rt      ; Adresse FFFC-FFFDh
 332  FFFE   E1AE                reset     DC.W     main          ; Adresse FFFE-FFFFh
 333                             
 334                             
 335  0000                                 END      
STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 12  "c6e4.ASM"
                                               e:\TP\c8e2\c8e2.asm

Symbol Name                       Value     Call       Type  Scope      Rel.  Line  Privacy  Segment   Size  Bytes File

ATCSR                                   0D         no  BYTE  Internal   ABS     33  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
ATRH                                    10         no  BYTE  Internal   ABS     36  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
ATRL                                    11         no  BYTE  Internal   ABS     37  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
ATICRH                                  1F         no  BYTE  Internal   ABS     51  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
ATICRL                                  20         no  BYTE  Internal   ABS     52  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
ADCCSR                                  34         no  BYTE  Internal   ABS     87  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
ADCDRH                                  35         no  BYTE  Internal   ABS     88  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
ADCDRL                                  36         no  BYTE  Internal   ABS     89  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
AWUPR                                   49         no  BYTE  Internal   ABS    131  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
AWUCSR                                  4A         no  BYTE  Internal   ABS    132  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
AVD_it                                FFEC         no  WORD  Internal   ABS    323  private  data         4     2  -
AWU_it                                FFFA         no  WORD  Internal   ABS    330  private  data         2     2  -

BREAKCR                                 22         no  BYTE  Internal   ABS     54  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC

CNTRH                                   0E         no  BYTE  Internal   ABS     34  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
CNTRL                                   0F         no  BYTE  Internal   ABS     35  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC

DCR0H                                   17         no  BYTE  Internal   ABS     43  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DCR0L                                   18         no  BYTE  Internal   ABS     44  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DCR1H                                   19         no  BYTE  Internal   ABS     45  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DCR1L                                   1A         no  BYTE  Internal   ABS     46  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DCR2H                                   1B         no  BYTE  Internal   ABS     47  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DCR2L                                   1C         no  BYTE  Internal   ABS     48  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DCR3H                                   1D         no  BYTE  Internal   ABS     49  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DCR3L                                   1E         no  BYTE  Internal   ABS     50  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DCMCLK                                  40         no  BYTE  Internal   ABS    120  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DCMFA                                   41         no  BYTE  Internal   ABS    121  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DCMFD                                   42         no  BYTE  Internal   ABS    122  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DCMBD                                   43         no  BYTE  Internal   ABS    123  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DCMCR                                   44         no  BYTE  Internal   ABS    124  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DCMCSR                                  45         no  BYTE  Internal   ABS    125  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DMCR                                    4B         no  BYTE  Internal   ABS    138  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DMSR                                    4C         no  BYTE  Internal   ABS    139  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DMBK1H                                  4D         no  BYTE  Internal   ABS    140  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DMBK1L                                  4E         no  BYTE  Internal   ABS    141  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DMBK2H                                  4F         no  BYTE  Internal   ABS    142  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DMBK2L                                  50         no  BYTE  Internal   ABS    143  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
DisplayChar_Digit                       81         no  BYTE  Internal   ABS     18  private  data         0     0  e:\TP\c8e2\MAX7219.INC
DisplayChar_Character                   82         no  BYTE  Internal   ABS     18  private  data         0     0  e:\TP\c8e2\MAX7219.INC

EECSR                                   30         no  BYTE  Internal   ABS     73  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
EICR                                    37         no  BYTE  Internal   ABS     95  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
EISR                                    3C         no  BYTE  Internal   ABS    114  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC

FCSR                                    2F         no  BYTE  Internal   ABS     67  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC

LTCSR2                                  08         no  BYTE  Internal   ABS     23  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
LTCARR                                  09         no  BYTE  Internal   ABS     24  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
LTCNTR                                  0A         no  BYTE  Internal   ABS     25  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
LTCSR1                                  0B         no  BYTE  Internal   ABS     26  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
LTICR                                   0C         no  BYTE  Internal   ABS     27  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC

MCCSR                                   38         no  BYTE  Internal   ABS    101  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
MAX7219_Init                          E010         no  WORD  Internal   ABS      9  private  data         0     0  e:\TP\c8e2\MAX7219.INC
STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 13  "c6e4.ASM"
                                               e:\TP\c8e2\c8e2.asm

MAX7219_ShutdownStart                 E039         no  WORD  Internal   ABS     10  private  data         0     0  e:\TP\c8e2\MAX7219.INC
MAX7219_ShutdownStop                  E047         no  WORD  Internal   ABS     11  private  data         0     0  e:\TP\c8e2\MAX7219.INC
MAX7219_DisplayTestStart              E055         no  WORD  Internal   ABS     12  private  data         0     0  e:\TP\c8e2\MAX7219.INC
MAX7219_DisplayTestStop               E063         no  WORD  Internal   ABS     13  private  data         0     0  e:\TP\c8e2\MAX7219.INC
MAX7219_SetBrightness                 E071         no  WORD  Internal   ABS     14  private  data         0     0  e:\TP\c8e2\MAX7219.INC
MAX7219_Clear                         E081         no  WORD  Internal   ABS     15  private  data         0     0  e:\TP\c8e2\MAX7219.INC
MAX7219_AllumePoint                   E0A7         no  WORD  Internal   ABS     16  private  data         0     0  e:\TP\c8e2\MAX7219.INC
MAX7219_AfficheP                      E0B5         no  WORD  Internal   ABS     17  private  data         0     0  e:\TP\c8e2\MAX7219.INC
MAX7219_DisplayChar                   E092         no  WORD  Internal   ABS     18  private  data         0     0  e:\TP\c8e2\MAX7219.INC

PADR                                    00         no  BYTE  Internal   ABS     11  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
PADDR                                   01         no  BYTE  Internal   ABS     12  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
PAOR                                    02         no  BYTE  Internal   ABS     13  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
PBDR                                    03         no  BYTE  Internal   ABS     15  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
PBDDR                                   04         no  BYTE  Internal   ABS     16  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
PBOR                                    05         no  BYTE  Internal   ABS     17  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
PWMCR                                   12         no  BYTE  Internal   ABS     38  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
PWM0CSR                                 13         no  BYTE  Internal   ABS     39  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
PWM1CSR                                 14         no  BYTE  Internal   ABS     40  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
PWM2CSR                                 15         no  BYTE  Internal   ABS     41  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
PWM3CSR                                 16         no  BYTE  Internal   ABS     42  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC

RCCR                                    39         no  BYTE  Internal   ABS    107  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
RCCR0                                 FFDE         no  WORD  Internal   ABS     27  private  data         0     0  -

SPIDR                                   31         no  BYTE  Internal   ABS     79  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
SPICR                                   32         no  BYTE  Internal   ABS     80  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
SPISR                                   33         no  BYTE  Internal   ABS     81  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
SICSR                                   3A         no  BYTE  Internal   ABS    108  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC
SetBrightness_Bright                    80         no  BYTE  Internal   ABS     14  private  data         0     0  e:\TP\c8e2\MAX7219.INC
SPI_it                                FFE2         no  WORD  Internal   ABS    318  private  data         2     2  -

TRANCR                                  21         no  BYTE  Internal   ABS     53  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC

WDGCR                                   2E         no  BYTE  Internal   ABS     60  private  data         0     0  e:\TP\c8e2\ST7Lite2.INC

aff_u                                 E17C         no  WORD  Internal   ABS    208  private  text        12     0  -
aff_d                                 E188         no  WORD  Internal   ABS    218  private  text        12     0  -
at_timerover_it                       FFE8         no  WORD  Internal   ABS    321  private  data         2     2  -
at_timerOC_it                         FFEA         no  WORD  Internal   ABS    322  private  data         2     2  -

boucle1                               E195         no  WORD  Internal   ABS    231  private  text         9     0  -
boucle2                               E1A0         no  WORD  Internal   ABS    239  private  text         8     0  -
boucl                                 E1C1         no  WORD  Internal   ABS    274  private  text        15     0  -

dummy_rt                              E1D6         no  WORD  Internal   ABS    296  private  text         1     0  -

ext3_it                               FFF2         no  WORD  Internal   ABS    326  private  data         2     2  -
ext2_it                               FFF4         no  WORD  Internal   ABS    327  private  data         2     2  -
ext1_it                               FFF6         no  WORD  Internal   ABS    328  private  data         2     2  -
ext0_it                               FFF8         no  WORD  Internal   ABS    329  private  data         2     2  -

init_port_spi                         E0FD         no  WORD  Internal   ABS     86  private  text        25     0  -
init_io_ports                         E116         no  WORD  Internal   ABS    105  private  text        25     0  -
init_int_mask                         E12F         no  WORD  Internal   ABS    130  private  text        18     0  -
init_chrono                           E141         no  WORD  Internal   ABS    147  private  text         7     0  -
init_aff                              E148         no  WORD  Internal   ABS    155  private  text         7     0  -
STMicroelectronics assembler v4.49   (C)1987-2016   Mon May 09 20:44:55 2016
Page 14  "c6e4.ASM"
                                               e:\TP\c8e2\c8e2.asm

inc_aff                               E14F         no  WORD  Internal   ABS    162  private  text        16     0  -
inc_u                                 E15F         no  WORD  Internal   ABS    175  private  text         3     0  -
inc_d                                 E175         no  WORD  Internal   ABS    196  private  text         6     0  -
initBoucle1                           E194         no  WORD  Internal   ABS    229  private  text         1     0  -
initBoucle2                           E19E         no  WORD  Internal   ABS    237  private  text         2     0  -
init_oscRC                            E1A8         no  WORD  Internal   ABS    247  private  text         6     0  -
int_marche                            E1D7         no  WORD  Internal   ABS    298  private  text         5     0  -
int_arret                             E1DC         no  WORD  Internal   ABS    303  private  text         3     0  -

lt_RTC1_it                            FFE4         no  WORD  Internal   ABS    319  private  data         2     2  -
lt_IC_it                              FFE6         no  WORD  Internal   ABS    320  private  data         2     2  -
lt_RTC2_it                            FFF0         no  WORD  Internal   ABS    325  private  data         2     2  -

main                                  E1AE         no  WORD  Internal   ABS    265  private  text        19     0  -

n_inc_u                               E162         no  WORD  Internal   ABS    180  private  text        19     0  -
n_inc_d                               E17B         no  WORD  Internal   ABS    202  private  text         1     0  -

retenue                                 8A         no  BYTE  Internal   ABS     48  private  bss          1     1  -
running                                 8B         no  BYTE  Internal   ABS     49  private  bss          1     1  -
reset                                 FFFE         no  WORD  Internal   ABS    332  private  data         2     2  -

skip_aff                              E1D0         no  WORD  Internal   ABS    284  private  text         6     0  -
softit                                FFFC         no  WORD  Internal   ABS    331  private  data         2     2  -

tempo                                 E194         no  WORD  Internal   ABS    228  private  text         1     0  -

valeurUnite                             88         no  BYTE  Internal   ABS     46  private  bss          1     1  -
valeurDizaine                           89         no  BYTE  Internal   ABS     47  private  bss          1     1  -


117 labels
No errors on assembly of 'e:\TP\c8e2\c8e2.asm'